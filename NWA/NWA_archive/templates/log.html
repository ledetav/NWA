{% extends "base.html" %}
{% load static %}

{% block title %}Лог Дарителей Тепла{% endblock %}

{% block page_content %}
<div class="log-page">
    <div class="log-page__filter">
        <form method="get" class="filter__form">
            <div class="filter__item filter__item--type">
                <label class="filter__label" for="type-work-select">Тип работы:</label>
                <div class="filter__select-wrapper">
                    <select class="filter__select" id="type-work-select" name="type_work">
                        {% for value, display_name in work_type_choices %}
                             <option value="{{ value }}" {% if value == selected_work_type %}selected{% endif %}>{{ display_name }}</option>
                        {% endfor %}
                    </select>
                </div>
                 <button type="submit" class="button button--neumorphic filter__button" title="Фильтровать по типу">
                     <i class="fas fa-filter"></i>
                 </button>
            </div>

            <div class="filter__item filter__item--search">
                <label class="filter__label" for="celebrant-name-input">Имя именинника:</label>
                <input type="text" class="filter__input" id="celebrant-name-input" name="celebrant_name" value="{{ celebrant_name|default:'' }}">
                <button type="submit" class="button button--neumorphic filter__button" title="Найти по имени">
                    <i class="fas fa-search"></i>
                </button>
            </div>
        </form>
    </div>

    <div class="log-page__table-container">
        <table class="data-table">
            <thead>
                <tr>
                    <th>Именинник</th>
                    <th>Дата</th>
                    <th>Тип работы</th>
                    <th>Даритель</th>
                    <th>Дата публикации</th>
                </tr>
            </thead>
            <tbody>
                {% for row in blogs %}
                <tr>
                    <td>{{ row.celebrant_name }}</td>
                    <td>{{ row.birthday_date }}</td>
                    <td>{{ row.work_type_display }}</td>
                    <td>{{ row.nw_name }}</td>
                    <td>{{ row.work_date }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock page_content %}